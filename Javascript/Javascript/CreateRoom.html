<html>
    <head>
        <title>CreateRoom</title>

    </head>
    <body>
        
        <div>
            <div id="NewRoomLabel">Room name:</div> 
            <input type = "text" id = "NewRoomTextBox">

            <br>
            <button id="NewRoomButton" onclick="CreateRoom();">Create room</button>

        </div>
    </body>
</html> 
<script>
    function CreateRoom()
    {        
        if(NewRoomTextBox.value == "")
        {
            alert("Please enter a room name");
        }
        else
        {
            var roomInfo = {
                PlayerID: localStorage.getItem('UserID'),
                RoomName: NewRoomTextBox.value
            };
            callAPI('http://localhost:63055/api/Room/CreateRoom', (roomID) => {localStorage.setItem('RoomID', roomID);
            
            localStorage.setItem('RoomName', NewRoomTextBox.value);
            localStorage.setItem('IsHost', "true");
            window.location.href = "./WaitingScreen.html"; }
            , roomInfo);
        }

    }

    function callAPI(url, callback, body)
    {
        var xhr = new XMLHttpRequest();
        xhr.open(body === undefined ? 'GET' : 'POST', url, true);
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.onload = () => callback(JSON.parse(xhr.responseText));

        if(body === undefined)
        {
            xhr.send();
        }
        else
        {
            xhr.send(JSON.stringify(body));
        }
    }
</script>